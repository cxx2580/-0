<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.card.mapper.UserMapper">
    <!-- 已有的映射... -->
    <select id="selectByUname" resultType="com.card.po.UserPO">
        SELECT id, uname, upwd, email FROM user WHERE uname = #{uname}
    </select>

    <insert id="insert" parameterType="com.card.po.UserPO">
        INSERT INTO user (uname, upwd, email) VALUES (#{uname}, #{upwd}, #{email})
    </insert>

    <!-- UserMapper.xml -->
    <update id="updatePwdById" parameterType="com.card.po.UserPO">
        UPDATE user
        SET upwd = #{upwd}  <!-- 新密码（加密后） -->
        WHERE id = #{id}    <!-- 当前用户ID -->
    </update>

    <!-- 新增：根据ID查询用户 -->
    <select id="selectById" parameterType="java.lang.Integer" resultType="com.card.po.UserPO">
        SELECT id, uname, upwd, email FROM user WHERE id = #{id}
    </select>
</mapper>